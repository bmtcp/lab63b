# การทดลองที่ 3 เรื่อง การเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัล

## วัตถุประสงค์
1.เพื่อศึกษาให้เข้าใจเกี่ยวกับการเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัลบนไมโครคอนโทรเลอร์


## อุปกรณ์ที่ใช้
1. Microcontroller ESP-01
2. 2-Port Serial USB 
3. Adapter
4. หลอดไฟ LED
5. Relay
6. แหล่งจ่ายไฟ เช่น powerbank


## ข้อมูลเบื้องต้น

[https://www.youtube.com/watch?v=CCnN1WJsXQY](https://www.youtube.com/watch?v=CCnN1WJsXQY)

[https://www.youtube.com/watch?v=6JnhaUILGuw](https://www.youtube.com/watch?v=6JnhaUILGuw)

## วิธีการทำการทดลอง
### ตอนที่ 1
1. ติดตั้งเชื่อมไมโครคอนโทรเลอร์และ USB โดยเสียบผ่าน adapter ซึ่ง adapter นี้จะต่อ port 0 ( สีขาว ) port1 ( สีเหลือง ) เชื่อมออกมาต่อกับหลอด LED เพื่อให้มองเห็นเอ้าพุทได้ง่ายขึ้น ซึ่งเอ้าพุทของการทดลองนี้จะออกมาทาง port 0  
2. เลือกโปรแกรมในโฟลเดอร์ 03_output-port จากนั้น set up ให้ port 0 เป็นเอ้าพุท และส่วนที่เป็น loop จะวน loop ทุกๆครึ่งวินาที count เพิ่มขึ้นทีละหนึ่ง ถ้าจำนวน count เป็นเลขคี่ กำหนดให้เป็น on ส่งค่าเอ้าพุทที่เป็น 1 ไปที่ port 0
ถ้า count เป็นจำนวนคู่ กำหนดให้เป็น off
6. Upload โปรแกรมไปยังไมโครคอนโทรเลอร์ใช้คำสั่ง pio run -t upload
7. ขณะโปรแกรมเริ่มรัน กดปุ่มสีดำบนตัวไมโครคอนโทรเลอร์ port 0 และ Reset เพื่อรับข้อมูล
8. เมื่อโปรแกรมโหลดเสร็จ ให้ใช้คำสั่ง pio device monitor แสดงผลจากไมโครคอนโทรเลอร์
### ตอนที่ 2
นำไมโครคอนโทรเลอร์ที่ upload โปรแกรมไว้แล้วมาเชื่อมกับตัว Relay และต่อ Relay กับแหล่งจ่าย หลังจากที่มีการให้กระแสไฟ Relay จะเริ่มทำงานคล้ายสวิตซ์เปิด - ปิด

## การบันทึกผลการทดลอง
ตัวแปร count เริ่มนับจาก 0 เพิ่มขึ้นทีละ 1 จะแสดงผลในทุกๆครึ่งวินาที เมื่อจำนวน count เป็นเลขคี่ กำหนดให้เป็น on ส่งค่าเอ้าพุทที่เป็น 1 ไปที่ port 0 หลอด LED สีเขียวจะติด เช่นเดียวกับเมื่อต่อกับ Relay ก็จะเกิดเสียงของหน้าสัมผัสที่เป็นโลหะของ Relay เมื่ออยู่ในโหมด on ขณะที่ถ้า count เป็นจำนวนคู่ กำหนดให้เป็น off หลอด LED จะไม่ดับ

## อภิปรายผลการทดลอง
จากการทดลองที่ 3 นี้เมื่อใช้คำสั่ง run โปรแกรม ขณะที่โปรแกรมเป็น on หลอด LED และ Relay จะติด ในขณะที่ถ้าเป็น off ทั้งหลอด LED และ Relay จะดับ ซึ่งจากการทดลองนี้สามารถนำไปใช้กับสวิตซ์เปิด - ปิดภายในบ้าน อาคารได้


## คำถามหลังการทดลอง
จากการทดลองสามารถใช้อุปกรณ์อื่นนอกจากหลอดไฟ LED และ Relay ได้หรือไม่

*answer* อาจเปลี่ยนไปใช้อุปกรณ์ เซนเซอร์เสียง อื่นๆแทนได้




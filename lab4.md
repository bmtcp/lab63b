# การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล

## วัตถุประสงค์
1.เพื่อให้เข้าใจเกี่ยวกับการนำเข้าสัญญาณ input ไปที่ไมโครคอนโทรเลอร์
2.เพื่อให้เข้าใจวิธีการทำงานของสัญญาณ และ sensor

## อุปกรณ์ที่ใช้
1. Microcontroller
2. 2-Port Serial USB 
3. Adapter
4. หลอด LED
5. Sensor แสง

## ข้อมูลเบื้องต้น
[https://www.youtube.com/watch?v=nFqoZT26U5k](https://www.youtube.com/watch?v=nFqoZT26U5k)

## วิธีการทำการทดลอง
### ตอนที่ 1
1. ติดตั้งเชื่อมไมโครคอนโทรเลอร์และ USB โดยเสียบผ่าน adapter ซึ่ง adapter นี้จะต่อ port 0 ( สีขาว ) เป็น input port 2 ( สีเหลือง ) เป็น output เชื่อมออกมาต่อกับหลอด LED เพื่อให้มองเห็นเอ้าพุทได้ง่ายขึ้น ซึ่งเอ้าพุทของการทดลองนี้จะออกมาทาง port 2
ส่วนที่เป็น loop digitalRead() เป็นการอ่านค่าจาก port ที่เป็น input ซึ่งก็คือ port 0 ข้อมูลที่อ่านจะเป็นข้อมูล digital มีเพียง 0 และ 1 

![image](https://user-images.githubusercontent.com/80880311/112316733-f7eb8300-8cdd-11eb-8ff4-3148e3b450da.jpeg)


2. Upload โปรแกรมไปยังไมโครคอนโทรเลอร์ใช้คำสั่ง pio run -t upload
3. ขณะโปรแกรมเริ่มรัน กดปุ่มสีดำบนตัวไมโครคอนโทรเลอร์ port 0 และ Reset เพื่อรับข้อมูล
4. เมื่อโปรแกรมโหลดเสร็จ ให้ใช้คำสั่ง pio device monitor แสดงผลจากไมโครคอนโทรเลอร์
5. เมื่อนำสายไฟสีขาวไปต่อกับ สายสีดำที่เป็น ground output ที่ได้จะมีค่าเป็น 0 ในขณะที่ถ้าต่อที่จุดอื่น output จะเป็น 1

![image](https://user-images.githubusercontent.com/80880311/112316851-12256100-8cde-11eb-8011-1139bdf5d93a.jpeg)

![image](https://user-images.githubusercontent.com/80880311/112316878-1782ab80-8cde-11eb-975a-7f68118e1a47.jpeg)

6. เมื่อลองเปลี่ยนมากดปุ่มสีดำที่ตัวไมโครคอนโทรเลอร์ ซึ่งต่ออยู่กับ port 0 ไฟจะติด ค่าที่อ่านได้มีค่าท่ากับ 0

![image](https://user-images.githubusercontent.com/80880311/112316941-25d0c780-8cde-11eb-9a41-a63ed9c2c616.jpeg)

### ตอนที่ 2
7.ต่อ sensor โดยให้ขาข้างแรกต่อกับสายสีแดง 3 volt ขาข้างที่ 2 ต่อที่ช่องตรงกลางระหว่างสายสีแดงและดำ เป็น resistor และต่อกับ port 0 และขาสุดท้ายจะต่อที่สายสีดำ ground
8.เมื่อเอามือบังตัว sensor แสง output ที่ได้จะอ่านค่าเป็น 1 ไฟ LED ไม่ติด แต่เมื่อเปิดให้ตัว sensor ได้รับแสง ค่าที่อ่านได้จะเปลี่ยนเป็น 0 

![image](https://user-images.githubusercontent.com/80880311/112316985-308b5c80-8cde-11eb-97dc-fa39398668d3.jpeg)

![image](https://user-images.githubusercontent.com/80880311/112317008-37b26a80-8cde-11eb-99ef-de5aacab10b1.jpeg)

## การบันทึกผลการทดลอง
เมื่อโปรแกรมโหลดเสร็จ จาการทดลองตอนที่ 1 ไมโครคอนโทรเลอร์จะแสดงผลกรณี input เป็น 1 ไฟจะติดที่ port 2 ในขณะที่ถ้า input เป็น 0 ไฟจะดับ และในตอนที่ 2 เมื่อ sensor แสงไม่สามารถตรวจจับแสงได้ ค่า output ที่อ่านได้มีค่าเป็น 1 และเมื่อได้รับแสง output จะอ่านค่าได้ 0

## อภิปรายผลการทดลอง
จากการทดลองที่ 4 นี้จะเห็นว่าเมื่อสัญญาณ input ที่นำเข้าจาก port 1 มีค่าเป็น 1 ไฟ LED จะติด แต่เมื่อ input มีค่าเป็น 0 output ที่ได้ ไฟ LED จะดับ เช่นเดียวกันกับการทำงานของ sensor แสง เมื่อมีแสงไฟ LED จึงจะติด

## คำถามหลังการทดลอง
จากการศึกษาการทดลองดังกล่าวสามารถนำไปประยุกต์ใช้อย่างไรได้บ้าง

*answer* สามารถนำไปประยุกต์ใช้กับไฟทางเดิน ไฟในห้องน้ำ หรือไฟบริเวณบ้านได้ รวมไปถึงเสาไฟฟ้าตามทางเท้าหรือถนนต่างๆก็สามารถใช้ sensor แสงและการเขียนโปรแกรมนี้ได้เช่นกัน
